// Package javadoc and sources
java {
    withJavadocJar()
    withSourcesJar()
}

// Configure JReleaser
jreleaser {

    project {
        name = rootProject.artifactId
        version = rootProject.version
        versionPattern = 'CUSTOM'
        snapshot {
            pattern = '.*-SNAPSHOT'
            label = 'early-access'
            fullChangelog = true
        }
        description = rootProject.description
        longDescription = rootProject.longDescription
        authors = [rootProject.developerName]
        tags = [
            'java',
            'library',
            'jackson',
            'java-library',
            'result',
            'serde-json',
            'serde-support',
            'jackson-databind'
        ]
        maintainers = [rootProject.developerName]
        license = rootProject.licenseId
        inceptionYear = rootProject.inceptionYear
        copyright = rootProject.copyright
        vendor = rootProject.organizationName
        links {
            homepage = rootProject.repository
            documentation = rootProject.homepage
            license = rootProject.licenseUrl
            bugTracker = rootProject.issuesUrl
            vcsBrowser = rootProject.repository
            donation = rootProject.sponsorUrl
        }
        languages {
            java {
                groupId = rootProject.group
                artifactId = rootProject.artifactId
                version = '8'
            }
        }
        icon {
            url = rootProject.iconUrl
            primary = true
            width = 64
            height = 64
        }
    }

    release {
        github {
            enabled = true
            repoOwner = rootProject.organizationId
            name = rootProject.artifactId
            username = rootProject.developerId
            tagName = rootProject.version
            previousTagName = rootProject.previousVersion
        }
    }

    signing {
        active = 'RELEASE'
        verify = false
        mode = 'MEMORY'
    }

    distributions {
        library {
            distributionType = 'JAVA_BINARY'
            tags = [
                'java',
                'library',
                'jackson',
                'java-library',
                'result',
                'serde-json',
                'serde-support',
                'jackson-databind'
            ]
            java {
                groupId = rootProject.group
                artifactId = rootProject.artifactId
                version = '8'
            }
        }
    }

    deploy {
        maven {
            nexus2 {
                mavenCentral {
                    url = 'https://oss.sonatype.org/service/local'
                    snapshotSupported = true
                    applyMavenCentralRules = true
                }
            }
        }
    }
}
